<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>XML Anonymizer</title><style>*,::after,::before{box-sizing:border-box;--default-padding:0.5rem 1rem;--button-padding:0.25rem 0.5rem;--backround-color:#fcfcfc;--secondary-color:rgb(247, 246, 246);--secondary-hover-color:rgb(225, 224, 224);--red:#d32f2f;--text-color:#333;margin:0;padding:0}body{font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;background-color:var(--backround-color);color:var(--text-color);margin:0 auto;max-width:60rem}button{border:1px solid var(--text-color);padding:var(--button-padding);cursor:pointer;background-color:var(--secondary-color);transition:transform .1s ease-in-out}button:hover{background-color:var(--secondary-hover-color)}button:active{transform:scale(.95)}buton:disabled,button[disabled]{cursor:auto}button:disabled:hover{background-color:var(--secondary-color)}button:disabled:active{transform:unset}h1{font-size:1.7rem}h2{font-size:1.4rem}header,main,section{margin-block:1rem}input{width:40ch}button,input{min-height:1.75rem;font-size:1rem;padding:var(--button-padding)}.container{margin:0 auto;padding:1rem}.header{box-sizing:border-box}.details{padding:var(--default-padding)}.instructions summary{cursor:pointer;padding:var(--default-padding);background-color:var(--secondary-color)}.instructions p{line-height:1.5;padding-block:1rem}details summary{cursor:pointer}details summary>*{display:inline}details>div{border:2px solid var(--secondary-color)}.sideBySide{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:min-content 1fr;gap:0 1rem;max-width:100cqw;box-sizing:border-box}.label{font-weight:700;font-size:1.2rem;grid-row:1;padding:.15rem 0;margin:0}.fields{padding-block:.75rem;display:flex;flex-wrap:wrap}.fieldNode{font-family:"Fira Code","Courier New",Courier,monospace;font-size:1rem;background-color:transparent;border:none;border-radius:8px;position:relative}.fieldNode:hover::after{font-size:.85rem;content:"️❌";position:absolute;top:-10px;right:-10px;visibility:visible;animation:slide-in 75ms ease-in-out forwards}@keyframes slide-in{0%{top:0;right:0;opacity:0}100%{top:-.5rem;right:-.5rem;opacity:1}}.code-input,.code-output{font-family:"Fira Code","Courier New",Courier,monospace;line-height:1.5;box-sizing:border-box;display:block;overflow-y:scroll;font-size:1rem;min-height:calc(1.5rem * 10);padding:1rem 1rem}p{max-width:60ch}code{font-family:"Fira Code","Courier New",Courier,monospace}#copyButton{position:relative}#copyButton::after{content:""}</style></head><body><header class="header"><h1>XML Anonymizer</h1><details class="instructions"><summary><h2>Instructions</h2></summary><div class="details"><p>This may be used to change XML fields with PII into numbers. It will keep values that are the same in the original XML a same new value. For example, if you had an EMPLID <code>123456</code> and you anonymize it, it will transform it to something like <code>000000</code> and all subsequent <code>123456</code> values found in the XML will be replaced with <code>000000</code>.</p><p>Add additional fields by their XML tag name. For <code>EMPLID</code>, type <code>EMPLID</code>, not <code>&lt;EMPLID&gt;</code>. Click corresponding button to remove from anonymizer.</p></div></details><section class="field-list"><form id="fieldForm" onsubmit=""><label for="xpathInput">XML Field Name:</label> <input type="text" id="xpathInput" placeholder="Insert XML Field: EMPLID not <EMPLID>"> <button type="submit">Add Field</button><div class="fields"></div></form></section></header><main class="sideBySide"><label for="xmlInput" class="label">Input <button onclick="processXML()">Anonymize</button></label> <textarea name="XML Anonymizer" class="code-input" id="xmlInput" spellcheck="false" placeholder="Enter XML Here"></textarea> <label for="xmlOutput" class="label">Output <button id="copyButton" disabled="disabled">Copy Results To Clipboard</button> <button id="downloadButton" disabled="disabled">Download XML</button></label> <textarea name="XML Anonymizer" class="code-output" id="xmlOutput" k readonly="readonly" placeholder="Output will be shown here"></textarea></main><script>let inputXML=document.getElementById("xmlInput"),outputXML=document.getElementById("xmlOutput"),copyButton=document.getElementById("copyButton"),downloadButton=document.getElementById("downloadButton"),fields=["EMPLID","NATIONAL_ID","PREV_SSN","PREV_ALPHA","Z_DOD_ID"];class Parser{constructor(e){this.fields=[],this.usedStrings=new Map,this.counter=0,this.skippedNodes=["FieldTypes"],e.forEach(e=>{this.addField(e)})}addField(e){let t=e.trim();t.includes(" ")||!t||0<=this.fields.findIndex(e=>e.name===t)||(e={name:t,xmlPath:"//"+t},this.fields.push(e),this.renderFields())}removeField(t){var e=this.fields.findIndex(e=>e.name===t);this.fields.splice(e,1),this.renderFields()}anonymizeXML(e){let a=(new DOMParser).parseFromString(e,"text/xml");return 0===e.length?"":0<a.getElementsByTagName("parsererror").length?(copyButton.disabled=!0,downloadButton.disabled=!0,a.getElementsByTagName("parsererror")[0].textContent):(copyButton.disabled=!1,downloadButton.disabled=!1,this.fields.forEach(n=>{var t=a.evaluate(n.xmlPath,a,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null);for(let e=0;e<t.snapshotLength;e++){var d,l=t.snapshotItem(e);if(l){let t=!1;if(!(1<l.childNodes.length)&&(1!==l.childNodes.length||"#text"===l.childNodes[0].nodeName)){let e=l.parentNode;for(;e;){if(this.skippedNodes.includes(e.nodeName)){t=!0;break}e=e.parentNode}t||(d=l.textContent||"",d=this.generateReplacement(n.name,d),l.textContent=d)}}}}),this.counter=0,this.usedStrings.clear(),(new XMLSerializer).serializeToString(a))}generateReplacement(e,t){var n;t.length;return this.usedStrings.has(t)||(n=this.counter.toString().repeat(t.length).substring(0,t.length),this.counter++,this.usedStrings.set(t,n)),this.usedStrings.get(t)}renderFields(){var e=document.querySelector(".fields");let n=document.createDocumentFragment();this.fields.forEach(e=>{var t=document.createElement("button");t.type="button",t.classList.add("fieldNode"),t.innerText="<"+e.name+">",t.setAttribute("title","Click to remove field from anonymizer."),t.addEventListener("click",()=>this.removeField(e.name)),n.append(t)}),e.replaceChildren(n)}}let addField=()=>{fields.push(input.value.trim())},processXML=()=>{outputXML.value=parser.anonymizeXML(inputXML.value)},downloadXML=()=>{var e,t;outputXML.value&&(e=document.createElement("a"),t=new Blob([outputXML.value],{type:"text/plain"}),e.setAttribute("href",window.URL.createObjectURL(t)),e.setAttribute("download","output.xml"),e.dataset.downloadurl=["text/plain",e.download,e.href].join(":"),e.click())},copyXML=()=>{outputXML.value&&(async()=>{try{await navigator.clipboard.writeText(outputXML.value),copyButton.disabled=!0,setTimeout(()=>{copyButton.disabled=!1},250)}catch(e){console.error(e.message)}})()},parser=(copyButton.addEventListener("click",copyXML),downloadButton.addEventListener("click",downloadXML),document.getElementById("fieldForm").addEventListener("submit",e=>{e.preventDefault();e=document.getElementById("xpathInput");e.value&&(parser.addField(e.value),e.value="")}),new Parser(fields))</script></body></html>